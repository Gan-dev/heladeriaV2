import{a as e}from"./chunk-RPWRD7AT.js";import{a as c,b as y,c as m,d as p}from"./chunk-IP6J3CWI.js";import{d as f}from"./chunk-ATX7TDFZ.js";var x={allergens:!1,lacteos:!1,egg:!1,gluten:!1,nuts:!1},v=[{key:"Huevo",label:"Huevo",img:"./dist/img/allergens/Egg.svg"},{key:"frutosSecos",label:"Frutos secos",img:"./dist/img/allergens/nuts.svg"},{key:"Gluten",label:"Gluten",img:"./dist/img/allergens/Gluten.svg"},{key:"Lacteos",label:"L\xE1cteos",img:"./dist/img/allergens/Lacteos.svg"}],w=[{key:"allergens",label:"Sin al\xE9rgenos",icon:"\u2713"},{key:"lacteos",label:"Sin l\xE1cteos",icon:"\u{1F95B}"},{key:"egg",label:"Sin huevo",icon:"\u{1F95A}"},{key:"gluten",label:"Sin gluten",icon:"\u{1F33E}"},{key:"nuts",label:"Sin frutos secos",icon:"\u{1F95C}"}];function I({ice:t,onClose:s}){y(()=>{let l=a=>{a.key==="Escape"&&s()};return globalThis.addEventListener("keydown",l),document.body.style.overflow="hidden",()=>{globalThis.removeEventListener("keydown",l),document.body.style.overflow=""}},[]);let o=v.filter(l=>t[l.key]);return e("div",{class:"modal-backdrop fixed inset-0 z-50 flex items-end sm:items-center justify-center sm:p-4",onClick:s,children:e("div",{class:"animate-slideUp relative w-full sm:max-w-sm bg-white sm:rounded-2xl rounded-t-3xl shadow-2xl overflow-hidden",style:"will-change: transform;",onClick:l=>l.stopPropagation(),children:[e("div",{class:"sm:hidden flex justify-center pt-3 pb-1",children:e("div",{class:"w-10 h-1 rounded-full bg-gray-300"})}),e("button",{type:"button",onClick:s,class:"absolute top-3 right-4 text-gray-400 hover:text-gray-700 text-2xl leading-none font-bold z-10","aria-label":"Cerrar",children:"\xD7"}),e("div",{class:"bg-gray-50 flex items-center justify-center h-52",children:e("img",{src:"./dist/img/icecream/"+t.img+".png",alt:t.name,class:"max-h-44 object-contain"})}),e("div",{class:"px-6 py-5",children:[e("h3",{class:"text-xl font-bold text-gray-900 mb-2",children:t.name}),!t.allergens&&e("span",{class:"inline-flex items-center gap-1 text-xs font-semibold text-green-700 bg-green-50 border border-green-200 rounded-full px-3 py-1 mb-3",children:"\u2713 Sin al\xE9rgenos"}),o.length>0?e("div",{children:[e("p",{class:"text-sm text-gray-500 font-medium mb-3",children:"Contiene al\xE9rgenos:"}),e("div",{class:"grid grid-cols-4 gap-3",children:o.map(l=>e("div",{class:"flex flex-col items-center gap-1.5",children:[e("div",{class:"w-16 h-16 bg-orange-50 rounded-2xl flex items-center justify-center border border-orange-100",children:e("img",{src:l.img,alt:l.label,class:"w-10 h-10"})}),e("span",{class:"text-xs text-gray-600 text-center font-medium leading-tight",children:l.label})]},l.key))})]}):e("p",{class:"text-sm text-gray-400",children:"No contiene al\xE9rgenos declarados."}),e("button",{type:"button",onClick:s,class:"mt-5 w-full py-2.5 bg-gray-900 text-white rounded-xl font-semibold text-sm hover:bg-gray-700 transition-colors",children:"Cerrar"})]})]})})}function S({item:t,onOpen:s}){let o=v.filter(a=>t[a.key]),l=!t.allergens;return e("article",{class:"group flex flex-col items-center bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-lg hover:-translate-y-0.5 transition-all duration-200 cursor-pointer active:scale-95"+(l?" ring-2 ring-green-400":""),onClick:()=>s(t),role:"button",tabIndex:0,onKeyDown:a=>{(a.key==="Enter"||a.key===" ")&&s(t)},"aria-label":"Ver detalle de "+t.name,children:[e("div",{class:"w-full bg-gray-50 flex items-center justify-center p-3 h-36 sm:h-44",children:e("img",{src:"./dist/img/icecream/"+t.img+".png",loading:"lazy",alt:t.name,class:"max-h-28 sm:max-h-36 object-contain group-hover:scale-105 transition-transform duration-300"})}),e("div",{class:"w-full px-2 pt-2 pb-2 text-center border-t border-gray-100 flex-1 flex flex-col justify-between gap-1",children:[e("p",{class:"font-semibold text-gray-800 text-xs leading-tight",children:t.name}),o.length>0?e("div",{class:"flex justify-center gap-1.5 flex-wrap mt-1",children:o.map(a=>e("img",{src:a.img,alt:a.label,title:a.label,class:"w-6 h-6 sm:w-7 sm:h-7 opacity-80",loading:"lazy"},a.key))}):e("span",{class:"text-xs text-green-600 font-semibold mt-0.5",children:"Sin al\xE9rgenos \u2713"}),e("p",{class:"text-gray-300 text-[10px] mt-0.5 sm:hidden",children:"Toca para ver m\xE1s"})]})]})}function L(t){let[s,o]=c(x),[l,a]=c(""),[g,d]=c(null),u=m(null),i=p(()=>{let n=l.trim().toLowerCase();return t.start.filter(r=>!(n&&!r.name.toLowerCase().includes(n)||s.allergens&&r.allergens||s.lacteos&&r.Lacteos||s.egg&&r.Huevo||s.gluten&&r.Gluten||s.nuts&&r.frutosSecos))},[t.start,s,l]),h=n=>o(r=>({...r,[n]:!r[n]})),k=Object.values(s).some(Boolean)||l.trim()!=="",b=()=>{o(x),a("")};return e(f,{children:[e("div",{class:"relative max-w-md mx-auto mb-4",children:[e("span",{class:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 text-lg pointer-events-none",children:"\u{1F50D}"}),e("input",{ref:u,type:"search",placeholder:"Buscar helado...",value:l,onInput:n=>a(n.target.value),class:"w-full pl-11 pr-10 py-3 rounded-2xl border border-gray-300 focus:border-gray-600 outline-none text-sm bg-white shadow-sm"}),l&&e("button",{type:"button",onClick:()=>{a(""),u.current?.focus()},class:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-700 text-xl","aria-label":"Limpiar b\xFAsqueda",children:"\xD7"})]}),e("div",{class:"flex flex-wrap justify-center gap-2 mb-3",children:w.map(n=>e("label",{class:"inline-flex items-center gap-1.5 px-4 py-2 rounded-full border cursor-pointer text-sm font-medium transition-all duration-200 select-none "+(s[n.key]?"bg-gray-900 text-white border-gray-900 shadow-md":"bg-white text-gray-700 border-gray-300 hover:border-gray-500"),children:[e("input",{type:"checkbox",class:"hidden",checked:s[n.key],onChange:()=>h(n.key)}),e("span",{children:n.icon}),n.label]},n.key))}),e("div",{class:"flex items-center justify-center gap-3 my-4",children:[e("p",{class:"text-sm font-semibold text-gray-600",children:i.length===t.start.length?e("span",{children:[e("b",{class:"text-gray-900",children:i.length})," ","helados disponibles"]}):e("span",{children:[e("b",{class:"text-gray-900",children:i.length})," de"," ",t.start.length," helados"]})}),k&&e("button",{type:"button",onClick:b,class:"text-xs text-gray-400 underline underline-offset-2 hover:text-gray-800 transition-colors",children:"Limpiar filtros"})]}),i.length===0?e("div",{class:"text-center py-16 text-gray-400",children:[e("p",{class:"text-5xl mb-4",children:"\u{1F366}"}),e("p",{class:"text-lg font-semibold text-gray-500",children:"Ning\xFAn helado coincide"}),e("p",{class:"text-sm mt-1",children:"Prueba con otro t\xE9rmino o cambia los filtros"}),e("button",{type:"button",onClick:b,class:"mt-5 px-6 py-2.5 bg-gray-900 text-white rounded-full text-sm font-semibold hover:bg-gray-700 transition-colors",children:"Ver todos"})]}):e("div",{class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3 sm:gap-4",children:i.map(n=>e(S,{item:n,onOpen:d},n.name))}),g&&e(I,{ice:g,onClose:()=>d(null)})]})}export{L as default};
